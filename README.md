# üå± Smart Greenhouse Stack

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ–≥–æ –≤–∏—Ä–æ—â—É–≤–∞–Ω–Ω—è –∑–µ–ª–µ–Ω—ñ –∑ LLM-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–º, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø—Ä–∏—Ä–æ–¥–Ω–æ—é –º–æ–≤–æ—é —Ç–∞ –∫–µ—Ä—É—î –ø–æ–ª–∏–≤–æ–º, —Å–≤—ñ—Ç–ª–æ–º —ñ –º—ñ–∫—Ä–æ–∫–ª—ñ–º–∞—Ç–æ–º. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –ø—ñ–¥ –∑–≤'—è–∑–∫—É –º—ñ–∂ –ü–ö, Orange Pi Zero —Ç–∞ Arduino Mega.

---

## üß≠ –ó–º—ñ—Å—Ç
1. [–û–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É](#-–æ–ø–∏—Å-–ø—Ä–æ–µ–∫—Ç—É)
2. [–ù–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞](#-–Ω–æ–≤–∞-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏](#-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏-—Å–∏—Å—Ç–µ–º–∏)
4. [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è](#-–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-—Ç–∞-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
5. [–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è](#-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
6. [–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–∏](#-–∑–∞–ø—É—Å–∫-—Å–∏—Å—Ç–µ–º–∏)
7. [–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞](#-–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
8. [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó](#-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞-–∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó)
9. [FAQ](#-faq)

---

## üåø –û–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É

**–ú–µ—Ç–∞:** –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É–≤–∞—Ç–∏ –≤–∏—Ä–æ—â—É–≤–∞–Ω–Ω—è –º—ñ–∫—Ä–æ–∑–µ–ª–µ–Ω—ñ —Ç–∞ —Å–∞–ª–∞—Ç—ñ–≤ —É –∫–æ–º–ø–∞–∫—Ç–Ω—ñ–π —Ç–µ–ø–ª–∏—Ü—ñ. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ñ–æ—Ä–º—É–ª—é—î —Ü—ñ–ª—ñ (¬´–ø—ñ–¥–≤–∏—â–∏—Ç–∏ –≤–æ–ª–æ–≥—ñ—Å—Ç—å –¥–æ 60% –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏¬ª), –∞ —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —ó—Ö –Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ –¥—ñ—ó.

**–ö–ª—é—á–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- ü§ñ LLM-–ø–æ–º—ñ—á–Ω–∏–∫ –Ω–∞ –ü–ö –ø–ª–∞–Ω—É—î —Ä–µ–∂–∏–º–∏ –ø–æ–ª–∏–≤—É/–æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è.
- üçä Orange Pi Zero –∞–≥—Ä–µ–≥—É—î —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—é —Ç–∞ —Ç—Ä–∞–Ω—Å–ª—é—î –∫–æ–º–∞–Ω–¥–∏ —á–µ—Ä–µ–∑ MQTT.
- üîß Arduino Mega –∑ PCA9685 –∫–µ—Ä—É—î –Ω–∞—Å–æ—Å–∞–º–∏, –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∞–º–∏ —Ç–∞ LED-—Å—Ç—Ä—ñ—á–∫–∞–º–∏.
- üìä –†–µ–∞–ª—å–Ω–∏–π —á–∞—Å: —Å–µ–Ω—Å–æ—Ä–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∫–æ–∂–Ω—ñ 2‚Äì5 —Å–µ–∫—É–Ω–¥, –≤–∏–∫–æ–Ω–∞–≤—á—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó —Ä–µ–∞–≥—É—é—Ç—å –º–∏—Ç—Ç—î–≤–æ.

---

## üèóÔ∏è –ù–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
flowchart LR
    User([üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á]) -->|–ø—Ä–∏—Ä–æ–¥–Ω–∞ –º–æ–≤–∞| PC[üñ•Ô∏è –ü–ö –∑ LLM]
    PC -->|HTTP/WebSocket| OPI[üçä Orange Pi Zero]
    OPI -->|MQTT control| ARD[üìü Arduino Mega + PCA9685]
    SENS[üõ∞Ô∏è –î–∞—Ç—á–∏–∫–∏ \n—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞/–≤–æ–ª–æ–≥—ñ—Å—Ç—å/CO‚ÇÇ/–æ—Å–≤—ñ—Ç–ª–µ–Ω—ñ—Å—Ç—å] -->|I2C/Analog| ARD
    ACT[‚öôÔ∏è –í–∏–∫–æ–Ω–∞–≤—á—ñ \n–Ω–∞—Å–æ—Å–∏/–≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∏/LED/–∫–ª–∞–ø–∞–Ω–∏] <-->|PWM/Relay| ARD
    OPI -->|MQTT telemetry| PC
```

- **–Ñ–¥–∏–Ω–∞ –ª–æ–≥—ñ–∫–∞**: –ü–ö –ø–ª–∞–Ω—É—î, Orange Pi Zero –º–∞—Ä—à—Ä—É—Ç–∏–∑—É—î, Arduino –≤–∏–∫–æ–Ω—É—î.
- **–õ–µ–≥–∫–∞ –∑–∞–º—ñ–Ω–∞**: —Å–µ–Ω—Å–æ—Ä–∏ —Ç–∞ –∞–∫—Ç—É–∞—Ç–æ—Ä–∏ –ø—ñ–¥–∫–ª—é—á–∞—é—Ç—å—Å—è –¥–æ Arduino –±–µ–∑ –∑–º—ñ–Ω–∏ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è.

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

### üñ•Ô∏è –ü–ö –∑ LLM
- –ú–æ–¥–µ–ª—ñ: –ª–æ–∫–∞–ª—å–Ω–∞ LLM (—á–µ—Ä–µ–∑ `pc-llm-service/`) –∞–±–æ —Ö–º–∞—Ä–Ω–∏–π API.
- –ó–∞–≤–¥–∞–Ω–Ω—è: NLP-–ø–∞—Ä—Å–∏–Ω–≥ —Ü—ñ–ª–µ–π, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–ª–∞–Ω—É –ø–æ–ª–∏–≤—É/–æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –∞–Ω–æ–º–∞–ª—ñ–π.
- –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏: REST/WS –¥–æ Orange Pi, MQTT –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó.

### üçä Orange Pi Zero
- –†–æ–ª—å: —à–ª—é–∑ —Ç–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, –ª–µ–≥–∫–∏–π –±—Ä–æ–∫–µ—Ä MQTT (mosquitto) + —Å–µ—Ä–≤—ñ—Å –º–∞—Ä—à–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–º–∞–Ω–¥ (`app/`).
- –ó–∞–≤–¥–∞–Ω–Ω—è: –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö —Å–µ–Ω—Å–æ—Ä—ñ–≤, –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è –∫–æ–º–∞–Ω–¥, watchdog Arduino.
- –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏: Ethernet/Wi‚ÄëFi, —Å–µ—Ä—ñ–π–Ω–∏–π –ø–æ—Ä—Ç –¥–æ Arduino.

### üìü Arduino Mega + PCA9685
- –†–æ–ª—å: —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è PWM/—Ä–µ–ª–µ.
- –ü–µ—Ä–∏—Ñ–µ—Ä—ñ—è: –¥–æ 16 –∫–∞–Ω–∞–ª—ñ–≤ PWM (PCA9685), –¥–æ 8 –∞–Ω–∞–ª–æ–≥–æ–≤–∏—Ö –¥–∞—Ç—á–∏–∫—ñ–≤, —Ü–∏—Ñ—Ä–æ–≤—ñ –≤—Ö–æ–¥–∏ –∫—ñ–Ω—Ü–µ–≤–∏–∫—ñ–≤.
- –ü—Ä–æ—Ç–æ–∫–æ–ª: –æ—Ç—Ä–∏–º—É—î JSON —á–µ—Ä–µ–∑ UART, –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç–∞–Ω–∏ —Ç–∞ —Ñ—ñ–¥–±–µ–∫ –ø–æ–º–∏–ª–æ–∫.

### üõ∞Ô∏è –î–∞—Ç—á–∏–∫–∏
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞/–≤–æ–ª–æ–≥—ñ—Å—Ç—å (DHT22/SHT40), CO‚ÇÇ (MH-Z19), –æ—Å–≤—ñ—Ç–ª–µ–Ω—ñ—Å—Ç—å (BH1750/ALS), —Ä—ñ–≤–µ–Ω—å –≤–æ–¥–∏ (—Ñ–ª–æ–∞—Ç/—É–ª—å—Ç—Ä–∞–∑–≤—É–∫).
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: I2C/Analog –¥–æ Arduino, –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è –≤ MQTT —Ä–∞–∑ –Ω–∞ 2‚Äì5 —Å–µ–∫—É–Ω–¥.

### ‚öôÔ∏è –í–∏–∫–æ–Ω–∞–≤—á—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó
- –ù–∞—Å–æ—Å–∏ (–¥—Ä–µ–Ω–∞–∂/–ø–æ–ª–∏–≤), –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∏, –æ–±—ñ–≥—Ä—ñ–≤/–æ—Ö–æ–ª–æ–¥–∂–µ–Ω–Ω—è, LED-—Å—Ç—Ä—ñ—á–∫–∏.
- –ö–µ—Ä—É–≤–∞–Ω–Ω—è: PWM (—è—Å–∫—Ä–∞–≤—ñ—Å—Ç—å LED, —à–≤–∏–¥–∫—ñ—Å—Ç—å –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä—ñ–≤) –∞–±–æ —Ä–µ–ª–µ (–Ω–∞—Å–æ—Å–∏/–∫–ª–∞–ø–∞–Ω–∏).

---

## üõ†Ô∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ù–∞ –ü–ö
```bash
# 1) –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è
git clone https://github.com/your-org/opi-zero-stack.git
cd opi-zero-stack

# 2) –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ LLM —Å–µ—Ä–≤—ñ—Å—É
cd pc-llm-service
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
# –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –º–æ–¥–µ–ª—ñ (–ª–æ–∫–∞–ª—å–Ω–∞ –∞–±–æ API –∫–ª—é—á —É .env)

# 3) Docker (–∑–∞ –ø–æ—Ç—Ä–µ–±–∏ –±—Ä–æ–∫–µ—Ä/–µ–º—É–ª—è—Ç–æ—Ä–∏)
docker compose -f docker-compose.pc.yml up -d
```

### –ù–∞ Orange Pi Zero
```bash
# 1) –ü–∞–∫–µ—Ç–∏
sudo apt update && sudo apt install -y python3 python3-venv docker.io docker-compose-plugin
sudo usermod -aG docker $USER && newgrp docker

# 2) –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è
cd ~ && git clone https://github.com/your-org/opi-zero-stack.git
cd opi-zero-stack

# 3) MQTT –±—Ä–æ–∫–µ—Ä + —Å–µ—Ä–≤—ñ—Å –º–∞—Ä—à–∞–ª—ñ–∑–∞—Ü—ñ—ó
cp app/.env.example app/.env
sed -i 's/MQTT_HOST=.*/MQTT_HOST=localhost/' app/.env
sudo docker compose up -d mqtt app
```

### –ù–∞ Arduino
```bash
# –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
sudo apt install -y arduino-cli
arduino-cli core install arduino:avr
arduino-cli lib install "Adafruit PWM Servo Driver Library" "ArduinoJson"

# –ó–±—ñ—Ä–∫–∞ —Ç–∞ –ø—Ä–æ—à–∏–≤–∫–∞ (–∑–∞–º—ñ–Ω–∏ ttyACM0 –Ω–∞ —Å–≤—ñ–π –ø–æ—Ä—Ç)
cd firmware
arduino-cli compile --fqbn arduino:avr:mega robotarm.ino
arduino-cli upload -p /dev/ttyACM0 --fqbn arduino:avr:mega robotarm.ino
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –ú–µ—Ä–µ–∂–µ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- –°—Ç–∞—Ç–∏—á–Ω—ñ IP —É –ª–æ–∫–∞–ª—å–Ω—ñ–π –º–µ—Ä–µ–∂—ñ –¥–ª—è –ü–ö —Ç–∞ Orange Pi (`192.168.x.x`).
- –í—ñ–¥–∫—Ä–∏—Ç—ñ –ø–æ—Ä—Ç–∏: `1883` (MQTT), `8000` (API Orange Pi), `11434` (LLM demo), `22` (SSH).
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —á–∞—Å—É: `systemd-timesyncd` –∞–±–æ `chrony` –Ω–∞ –≤—Å—ñ—Ö –≤—É–∑–ª–∞—Ö.

### MQTT
- –ë—Ä–æ–∫–µ—Ä mosquitto –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞ Orange Pi (`docker compose up -d mqtt`).
- –¢–æ–ø—ñ–∫–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:
  - `greenhouse/sensors/#` ‚Äî —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—è (json payload).
  - `greenhouse/cmd/actuators` ‚Äî –∫–æ–º–∞–Ω–¥–∏ –Ω–∞ Arduino.
  - `greenhouse/llm/goals` ‚Äî —Ü—ñ–ª—ñ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
  - `greenhouse/events` ‚Äî –∞–ª–µ—Ä—Ç–∏/–∞–Ω–æ–º–∞–ª—ñ—ó.

### –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
–ü—Ä–∏–∫–ª–∞–¥ `app/.env` –¥–ª—è Orange Pi:
```env
MQTT_HOST=localhost
MQTT_PORT=1883
SERIAL_PORT=/dev/ttyACM0
SERIAL_BAUD=115200
FALLBACK_MODE=manual    # manual | auto | safe
HUMIDITY_TARGET=60
LIGHT_CYCLE=16h_on_8h_off
```

–ü—Ä–∏–∫–ª–∞–¥ `.env` –¥–ª—è –ü–ö (LLM):
```env
LLM_PROVIDER=openai
OPENAI_API_KEY=sk-...
MQTT_HOST=192.168.1.220
MQTT_PORT=1883
PLAN_HORIZON_MIN=120
```

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–∏

1) **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±—Ä–æ–∫–µ—Ä —Ç–∞ —à–ª—é–∑ –Ω–∞ Orange Pi**
```bash
cd ~/opi-zero-stack
sudo docker compose up -d mqtt app
```

2) **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ LLM-—Å–µ—Ä–≤—ñ—Å –Ω–∞ –ü–ö**
```bash
cd pc-llm-service
source .venv/bin/activate
uvicorn api:app --host 0.0.0.0 --port 11434
```

3) **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–≤'—è–∑–æ–∫**
```bash
# –ù–∞ Orange Pi –∞–±–æ –ü–ö
mosquitto_sub -h 192.168.1.220 -t 'greenhouse/events' -v &
mosquitto_pub -h 192.168.1.220 -t 'greenhouse/events' -m '{"ping":true}'
```

4) **–°—Ç–∞—Ä—Ç —Ä–æ–±–æ—á–æ–≥–æ —Ü–∏–∫–ª—É**
- LLM –Ω–∞–¥—Å–∏–ª–∞—î –ø–ª–∞–Ω —É `greenhouse/llm/goals`.
- Orange Pi —Ç—Ä–∞–Ω—Å–ª—é—î –≤ `greenhouse/cmd/actuators` —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON.
- Arduino –≤–∏–∫–æ–Ω—É—î —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç–∞–Ω–∏ –≤ `greenhouse/sensors/state`.

---

## ü©∫ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è Orange Pi API:
```bash
curl http://192.168.1.152:8000/healthz
```

- –ñ—É—Ä–Ω–∞–ª–∏ —Å–µ—Ä–≤—ñ—Å—ñ–≤ Docker –Ω–∞ Orange Pi:
```bash
sudo docker compose logs -f app mqtt
```

- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä—ñ–π–Ω–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É Arduino:
```bash
sudo screen /dev/ttyACM0 115200
```

- –¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥ –¥–æ Arduino —á–µ—Ä–µ–∑ MQTT:
```bash
mosquitto_pub -h 192.168.1.220 -t 'greenhouse/cmd/actuators' \
  -m '{"pump_main":1, "fan_left":128, "led_white":200}'
```

---

## üîó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó

```mermaid
sequenceDiagram
    participant User as üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á
    participant PC as üñ•Ô∏è –ü–ö (LLM)
    participant OPI as üçä Orange Pi Zero
    participant ARD as üìü Arduino
    participant ACT as ‚öôÔ∏è –ê–∫—Ç—É–∞—Ç–æ—Ä–∏

    User->>PC: "–ü—ñ–¥–≤–∏—â–∏—Ç–∏ –≤–æ–ª–æ–≥—ñ—Å—Ç—å –¥–æ 60%"
    PC->>OPI: –ü–ª–∞–Ω –¥—ñ–π (HTTP/WS)
    OPI->>PC: –ü–æ—Ç–æ—á–Ω–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—è (MQTT)
    OPI->>ARD: JSON –∫–æ–º–∞–Ω–¥ (UART)
    ARD-->>OPI: –°—Ç–∞—Ç—É—Å + —Å–µ–Ω—Å–æ—Ä–∏ (UART)
    OPI-->>PC: –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è `greenhouse/sensors/#` (MQTT)
    ARD-->>ACT: PWM/Relay —Å–∏–≥–Ω–∞–ª–∏
```

**–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥–∏ –¥–æ Arduino (UART / MQTT payload):**
```json
{
  "pump_main": 1,
  "fan_left": 128,
  "led_white": 180,
  "mister": 1,
  "deadline_ms": 5000
}
```

**–§–æ—Ä–º–∞—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó:**
```json
{
  "ts": 1731000000,
  "temperature": 23.8,
  "humidity": 59.4,
  "co2": 680,
  "light": 320,
  "water_level_ok": true,
  "errors": []
}
```

---

## ‚ùì FAQ

**–Ø–∫ –∑–∞–¥–∞—Ç–∏ —Ü—ñ–ª—å –ø—Ä–∏—Ä–æ–¥–Ω–æ—é –º–æ–≤–æ—é?**  
–ù–∞–¥—ñ—à–ª—ñ—Ç—å —Ç–µ–∫—Å—Ç —É REST/WS –µ–Ω–¥–ø–æ—ñ–Ω—Ç LLM-—Å–µ—Ä–≤—ñ—Å—É (`POST /goals`). –í—ñ–Ω —Å—Ñ–æ—Ä–º—É—î –ø–ª–∞–Ω —ñ –æ–ø—É–±–ª—ñ–∫—É—î –π–æ–≥–æ –≤ MQTT.

**–©–æ —Ä–æ–±–∏—Ç–∏ –ø—Ä–∏ –æ–±—Ä–∏–≤—ñ –∑–≤'—è–∑–∫—É –∑ Arduino?**  
Orange Pi –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —É `safe` —Ä–µ–∂–∏–º: –≤–∏–º–∏–∫–∞—î –Ω–∞—Å–æ—Å–∏, –∑–∞–ª–∏—à–∞—î –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∏ –Ω–∞ –º—ñ–Ω—ñ–º—É–º—ñ —Ç–∞ —à–ª–µ –∞–ª–µ—Ä—Ç —É `greenhouse/events`.

**–Ø–∫ —à–≤–∏–¥–∫–æ –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—Ç–∏ –∞–±–æ —Ö–æ—Å—Ç–∏?**  
–û–Ω–æ–≤—ñ—Ç—å `app/.env` —ñ `.env` –Ω–∞ –ü–ö, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ Docker/uvicorn.

**–ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∞ GPU?**  
–ù—ñ, LLM –º–æ–∂–µ –±—É—Ç–∏ –º–∞–ª–µ–Ω—å–∫–æ—é (Q4), –∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –≤–∏–∫–æ–Ω—É—î Arduino.

**–Ø–∫ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —Å–µ–Ω—Å–æ—Ä?**  
–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –¥–æ Arduino, –¥–æ–¥–∞–π—Ç–µ –æ–±—Ä–æ–±–∫—É –≤ –ø—Ä–æ—à–∏–≤–∫—É (—Ä–æ–∑–¥—ñ–ª `readSensors()`), Orange Pi –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥—Ö–æ–ø–∏—Ç—å –Ω–æ–≤–µ –ø–æ–ª–µ –∑ JSON.

